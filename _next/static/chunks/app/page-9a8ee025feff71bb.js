(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{330:(e,t,l)=>{"use strict";l.d(t,{default:()=>d});var a=l(5155),r=l(2115),c=l(5472);let s=["♠︎","♥"];function n(e){switch(e){case 1:return"A";case 11:return"J";case 12:return"Q";case 13:return"K";default:return e.toString()}}function i(e){switch(e){case"♥":return"red";case"♠︎":return"black";default:return"green"}}let d=()=>{let[e,t]=(0,r.useState)(null),[l,d]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[p,x]=(0,r.useState)(0),[m,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{j()},[]);let v=e=>{let t=l.find(t=>t.cards.some(t=>t.id===e.id));if(!t)return;let a=t.cards.findIndex(t=>t.id===e.id),r=t.cards.slice(a);if(e.faceUp&&r.every((e,t,l)=>{if(0===t)return!0;let a=l[t-1];return e.faceUp&&e.suit===a.suit&&e.value===a.value-1}))for(let c of l){if(c.id===t.id)continue;let s=c.cards[c.cards.length-1];if(s&&s.faceUp&&e.value===s.value-1){let e=t.cards.slice(0,a);if(e.length>0){let t=e[e.length-1];t.faceUp||(t.faceUp=!0)}let s=[...c.cards,...r],n=l.map(l=>l.id===t.id?{...l,cards:e}:l.id===c.id?{...l,cards:s}:l);g(e=>[...e,l]);let[i,o]=b(n);d(i),o>0&&x(e=>e+o);return}}},b=e=>{let t=0;return[e.map(e=>{for(let l=0;l<=e.cards.length-13;l++){let a=e.cards.slice(l,l+13);if(a.every((e,t)=>e.faceUp&&e.suit===a[0].suit&&e.value===13-t)){t+=1;let a=[...e.cards.slice(0,l),...e.cards.slice(l+13)];if(a.length>0){let e=a[a.length-1];e.faceUp||(e.faceUp=!0)}return{...e,cards:a}}}return e}),t]},j=()=>{x(0);let e=function(){let e=[];for(let t=0;t<8;t++)for(let l=1;l<=13;l++)e.push({suit:s[0],value:l,faceUp:!1,id:"".concat(l,"-").concat(t),label:"".concat(n(l)," ").concat(s[0]),color:i(s[0])});for(let t=e.length-1;t>0;t--){let l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}return e}(),t=e.splice(0,50),l=Array.from({length:10},(e,t)=>({id:"col-".concat(t),cards:[]}));for(;e.length;)for(let t=0;t<l.length;t++){let a=e.pop();a&&l[t].cards.push(a)}l.forEach(e=>{e.cards.length>0&&(e.cards[e.cards.length-1].faceUp=!0)}),d(l),h(t)},y=(0,c.FR)((0,c.MS)(c.AN,{activationConstraint:{distance:5}}));return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center gap-2",children:[(0,a.jsx)("button",{onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",children:"New Game"}),(0,a.jsx)("button",{onClick:()=>{x(0);let e=function(){let e=[];for(let t=0;t<s.length;t++)for(let l=0;l<4;l++)for(let a=1;a<=13;a++)e.push({suit:s[t],value:a,faceUp:!1,color:i(s[t]),id:"".concat(a,"-").concat(l,"-").concat(s[t]),label:"".concat(n(a)," ").concat(s[t])});for(let t=e.length-1;t>0;t--){let l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}return e}(),t=e.splice(0,50),l=Array.from({length:10},(e,t)=>({id:"col-".concat(t),cards:[]}));for(;e.length;)for(let t=0;t<l.length;t++){let a=e.pop();a&&l[t].cards.push(a)}l.forEach(e=>{e.cards.length>0&&(e.cards[e.cards.length-1].faceUp=!0)}),d(l),h(t)},className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",children:"New 2 suit Game"})]}),(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center gap-2",children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-start items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{if(u.length<10)return;let e=[...l],t=[...u];for(let l=0;l<10;l++){let a=t.shift();a&&(a.faceUp=!0,e[l].cards.push(a))}h(t),d(e)},disabled:u.length<10,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",children:["Deal Next Row (",u.length/10," left)"]}),(0,a.jsx)("button",{onClick:()=>{0!==m.length&&(d(m[m.length-1]),g(e=>e.slice(0,-1)))},disabled:0===m.length,className:"bg-yellow-500 text-white px-4 py-2 rounded disabled:opacity-50",children:"Undo"})]}),(0,a.jsxs)("div",{className:"text-white",children:["Completed Stacks: ",p]})]}),(0,a.jsx)("div",{children:8===p&&(0,a.jsx)("p",{children:"You won!!"})}),(0,a.jsxs)(c.Mp,{collisionDetection:c.fp,sensors:y,onDragStart:e=>{let a=l.flatMap(e=>e.cards).find(t=>t.id===e.active.id);a&&t(a)},onDragEnd:a=>{t(null);let{active:r,over:c}=a;if(!c||!e)return;let s=l.find(e=>e.cards.some(e=>e.id===r.id)),n=l.find(e=>e.id===c.id);if(!s||!n||s.id===n.id)return;let i=s.cards.findIndex(t=>t.id===e.id),o=s.cards.slice(i);if(!o.every((e,t,l)=>{if(0===t)return!0;let a=l[t-1];return e.faceUp&&e.suit===a.suit&&e.value===a.value-1}))return;let u=n.cards[n.cards.length-1];if(u&&!(u.faceUp&&e.value===u.value-1))return;let f=s.cards.slice(0,i);if(f.length>0){let e=f[f.length-1];e.faceUp||(e.faceUp=!0)}let h=[...n.cards,...o],p=l.map(e=>e.id===s.id?{...e,cards:f}:e.id===n.id?{...e,cards:h}:e);g(e=>[...e,l]);let[m,v]=b(p);d(m),v>0&&x(e=>e+v)},onDragCancel:()=>t(null),children:[(0,a.jsx)("div",{className:"flex gap-4 p-4",children:l.map(t=>(0,a.jsx)(o,{column:t,draggedCard:e,onCardClick:v},t.id))}),(0,a.jsx)(c.Hd,{children:e&&(0,a.jsx)(f,{card:e,columns:l})})]})]})};function o(e){let{column:t,draggedCard:l,onCardClick:r}=e,{setNodeRef:s}=(0,c.zM)({id:t.id}),n=!!l&&t.cards.some(e=>e.id===l.id),i=l&&n?t.cards.findIndex(e=>e.id===l.id):-1;return(0,a.jsx)("div",{ref:s,className:"w-26 min-h-40 relative ".concat(t.cards.length?"":"border border-gray-400 rounded p-2 bg-green-100"),children:(0,a.jsx)("div",{className:"relative w-full h-full gap-2",children:t.cards.map((e,t)=>l&&n&&t>=i?null:(0,a.jsx)(u,{card:e,style:{top:"".concat(30*t,"%")},onClick:()=>r(e)},e.id))})})}function u(e){let{card:t,style:l,onClick:s}=e,{attributes:n,listeners:i,setNodeRef:d,transform:o,isDragging:u}=(0,c.PM)({id:t.id}),f=(0,r.useRef)(null),p={transform:o?"translate3d(".concat(o.x,"px, ").concat(o.y,"px, 0)"):void 0,zIndex:u?1e3:1,userSelect:"none",...l};return(0,a.jsx)("div",{ref:d,style:p,className:"relative",onPointerDown:e=>{f.current={x:e.clientX,y:e.clientY}},onPointerUp:e=>{if(!f.current)return;let t=Math.abs(e.clientX-f.current.x),l=Math.abs(e.clientY-f.current.y);f.current=null,t<5&&l<5&&(null==s||s())},children:(0,a.jsx)("div",{...n,...i,className:"absolute top-0 left-0 h-full",children:(0,a.jsx)(h,{card:t},t.id)})})}function f(e){let{card:t,columns:l}=e,r=l.find(e=>e.cards.some(e=>e.id===t.id));if(!r)return null;let c=r.cards.findIndex(e=>e.id===t.id),s=r.cards.slice(c);return(0,a.jsx)("div",{className:"relative aspect-[2/3] w-full",children:s.map((e,l)=>(0,a.jsx)("div",{className:"absolute top-0 left-0 border rounded shadow text-center w-full",style:{top:"".concat(30*l,"%"),backgroundColor:e.faceUp?"white":"papayawhip",color:"".concat(t.color)},children:(0,a.jsx)("div",{className:"w-full text-[clamp(1rem,1.5vw,2rem)] border rounded shadow text-center py-1 px-2",children:(0,a.jsxs)("div",{className:"flex flex-col justify-between h-full text-[1em]",children:[(0,a.jsx)("div",{className:"flex justify-start text-[1em]",children:e.faceUp&&e.label}),(0,a.jsx)("div",{className:"flex justify-center text-[4em] leading-none",children:e.faceUp&&e.suit})]})})},e.id))})}function h(e){let{card:t}=e;return(0,a.jsx)("div",{className:"absolute top-0 left-0 rounded",style:{backgroundColor:t.faceUp?"white":"papayawhip",color:"".concat(t.color)},children:(0,a.jsx)("div",{className:"relative w-full aspect-[2/3]  min-h-[90px] text-[clamp(1rem,1.5vw,2rem)] border border-black rounded shadow text-center py-1 px-2",children:(0,a.jsxs)("div",{className:"flex flex-col justify-between h-full text-[1em]",children:[(0,a.jsx)("div",{className:"flex justify-start text-[1em]",children:t.faceUp&&t.label}),(0,a.jsx)("div",{className:"flex justify-center text-[4em] leading-none",children:(0,a.jsx)("span",{className:t.faceUp?"":"invisible",children:t.suit})})]})})},t.id)}},3819:(e,t,l)=>{Promise.resolve().then(l.bind(l,330))}},e=>{var t=t=>e(e.s=t);e.O(0,[472,441,684,358],()=>t(3819)),_N_E=e.O()}]);